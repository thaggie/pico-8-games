pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
local dog

function _init() 
  score =0
  dog = {
    x = 64,
    y = 64,
    width=8,
    height=8
  }
  heart = {
    x=20,
    y=0,
    dx=2,
    dy=2,
    width=7,
    height=6
  }
end


function detect_collision(h, d) 

  if (h.x + h.width > d.x and h.x < d.x + d.width and h.y + h.height > d.y and h.y < d.y + d.height) then
    score += 1
    heart.x = rnd() * (128 - heart.width)
    heart.y = rnd() * (128 - heart.height)
    heart.dx = (rnd() > 0.5) and -2 or 2
    heart.dy = (rnd() > 0.5) and -2 or 2
    sfx(0)
  end
end

function _update() 
  if (btn(0)) then
     dog.x = dog.x - 1
  end
  
  if (btn(1)) then
     dog.x = dog.x + 1
  end
  
  if (btn(2)) then
     dog.y = dog.y - 1
  end
  
  if (btn(3)) then
     dog.y = dog.y + 1
  end

  if (heart.x + heart.dx < 0 or heart.x + heart.dx > 128-heart.width) then
    heart.dx *= -1
    sfx(1)
  end

  if (heart.y + heart.dy < 0 or heart.y + heart.dy > 128-heart.height) then
    heart.dy *= -1
    sfx(1)
  end

   heart.x += heart.dx
   heart.y += heart.dy

   detect_collision(heart, dog);
end

function _draw()
  cls()
  rect(0,0,127,127,5)
  spr(1,dog.x,dog.y)
  spr(2, heart.x, heart.y)
  print(score, 10,10, 7)
end

__gfx__
00000000000004460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000005460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700644444460880880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000444444448888888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000774444448888888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700444444440888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000088800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0001000000000280502705027050161501615015150141502705027050270502c0503005032050241502515025150251502905029050000000000000000000000000000000000000000000000000000000000000
0007000016060120600b00006f0007f000e600085000b400075000b400075000b40006600066000660020d0020d0020d000000000000000000000000000000000000000000000000000000000000000000000000
001000001075015750107500b750137501010018750101001d7501c7501f750257502d7002d750167500e75008750067500000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 01424344

